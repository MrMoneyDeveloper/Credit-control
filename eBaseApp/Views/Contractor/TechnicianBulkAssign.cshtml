@model IEnumerable<ContractorJobSheetViewModel>
@using eBaseApp.Models
@using eBaseApp.ViewModels
@using eBaseApp.Helpers
@{
    //ViewBag.Title = "Job Sheet";
}
<head>
    <link rel="stylesheet" href="~/assets/bundles/datatables/datatables.min.css">
    <link rel="stylesheet" href="~/assets/bundles/datatables/DataTables-1.10.16/css/dataTables.bootstrap4.min.css">
    <style>
        th {
            background-color: #1f824c !important;
            color: #fff !important;
        }
    </style>
</head>
<div class="main-content">

    <nav aria-label="breadcrumb" style="margin-left: 10px; padding: 0 10px; border: 1px solid rgba(0, 0, 0, 0.1); border-radius: 4px;">
        <ol class="breadcrumb mb-0 d-flex flex-row">
            <li class="breadcrumb-item">
                <a href="index.html" style="text-decoration: none; color: #495057;">
                    <i class="fas fa-home" style="margin-right: 5px;"></i>
                    Dashboard / Credit Control / Contractor
                </a>
            </li>
        </ol>
    </nav>

    <br />

    <div class="page-content">
        <div class="container-fluid">
            <div class="row">

                <div class="col-12">
                    <div class="page-title-box d-flex align-items-center justify-content-between">
                        <h4 class="mb-0">@ViewBag.Title</h4>


                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col-lg-12">
                    <div class="card">

                        <div class="card-body">
                            <div class="row">
                                <div class="col-lg-12">
                                    <div class="card">
                                        <div class="card-header d-flex align-items-center justify-content-center">
                                            <h4 class="card-title">Job Sheet</h4>
                                        </div>

                                        <div class="card-body">
                                            <table id="example2" class="table table-bordered table-striped" style="width:100%">
                                                <thead>
                                                    <tr>
                                                        <th class="table-heading" style="background-color: #1f824c; color: white">Edit</th>
                                                        <th class="table-heading" style="background-color: #1f824c; color: white">Municipality</th>
                                                        <th class="table-heading" style="background-color: #1f824c; color: white">Contractor</th>
                                                        <th class="table-heading" style="background-color: #1f824c; color: white">Action Type</th>
                                                        <th class="table-heading" style="background-color: #1f824c; color: white">Allocation Date</th>
                                                        <th class="table-heading" style="background-color: #1f824c; color: white">Allocated</th>
                                                        <th class="table-heading" style="background-color: #1f824c; color: white">Unassigned</th>
                                                    </tr>
                                                </thead>

                                                <tbody>
                                                    @foreach (ContractorJobSheetViewModel data in Model)
                                                    {
                                                        <tr>
                                                            <td>
                                                                <a href="javascript:void(0);" data-toggle="modal" data-target=".@data.GroupId">
                                                                    <span class="fa fa-pen" style="margin: 3px;"></span>
                                                                </a>
                                                            </td>
                                                            <td>@Html.Raw(data.Municipality)</td>
                                                            <td>@Html.Raw(data.Contractor.Name)</td>
                                                            <td>@Html.Raw(data.ActionType.Name)</td>
                                                            <td>@Html.Raw(data.AllocationDate)</td>
                                                            <td>@Html.Raw(data.Allocated)</td>
                                                            <td>@Html.Raw(data.Unassined)</td>
                                                        </tr>
                                                    }
                                                </tbody>
                                            </table>
                                        </div>
                                    </div>

                                    <!-- end card -->
                                </div>
                                <!-- end col -->
                            </div>
                        </div>
                    </div>
                </div><!-- end col -->
            </div><!-- end row -->

        </div> <!-- container-fluid -->
    </div>
    <!-- End Page-content -->
</div>
@foreach (ContractorJobSheetViewModel data in Model)
{
    using (Html.BeginForm("TechnicianBulkAssign", "Contractor", FormMethod.Post/*, new { id = "ContractorFormId" }*/))
    {

        <div class="modal fade  @data.GroupId" tabindex="-1" role="dialog" aria-labelledby="myLargeModalLabel"
             aria-hidden="true">
            <div class="modal-dialog modal-lg" style="max-width: 1200px;">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title text-center" id="myLargeModalLabel">
                            Contractor Assign To Technician : @data.Contractor.Name
                        </h5>
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                            <span aria-hidden="true">&times;</span>
                        </button>
                    </div>
                    <div class="modal-body">
                        <div class="modal-body">
                            <div class="row">
                                <div class="col-lg-12">
                                    <div class="card">
                                        <div class="card-header">
                                            <h6 class="card-title" style="text-align: center; text-decoration: underline;">Jobcard Balance Sheet By Contractor Detail</h6>
                                        </div><!-- end card header -->
                                        <div class="card-body">
                                            <div class="row">
                                                <div class="col-lg-12">
                                                    <div class="mb-3">
                                                        <label for="basicpill-firstname-input" class="form-label fs-6"> Allocation Group </label>
                                                        <div class="col-md-9 input-group">
                                                            <span class="input-group-text"><span class="fa fa-users fa-sm"></span></span>
                                                            @Html.DropDownList("TechnicianId", DropdownHelper.GETTECHNICIANS(data.Contractor.Id), "-- Select Technician --", htmlAttributes: new { @class = "form-control form-control-sm", @Name = "TechnicianId", @required = true })
                                                            <span class="input-group-text"><span class="fa"></span></span>
                                                        </div>

                                                    </div>
                                                </div>

                                                <div class="col-lg-6">
                                                    <div class="mb-3">
                                                        <span> <label for="basicpill-lastname-input" class="form-label"></label></span>
                                                        <div class="col-md-9 input-group">
                                                            <button type="submit" class="btn btn-sm btn-primary w-sm">
                                                                <span class="fa fa-paper-plane"></span>
                                                                Assign
                                                            </button>
                                                            <button type="submit" class="btn btn-sm btn-secondary w-sm" data-bs-dismiss="modal">
                                                                <span class="fa fa-times"></span>
                                                                Cancel
                                                            </button>
                                                        </div>
                                                    </div>
                                                </div><!-- end col -->
                                                <!-- end col -->

                                            </div>
                                            <br />
                                            <div class="card-header">
                                                <h6 class="card-title" style="margin-left: 10px; text-align: center; text-decoration: underline;">Jobcard Balance Sheet Contractor/Technician</h6>
                                            </div>


                                            <br />



                                            <div class="table-responsive">
                                                <table class="table table-striped" id="table-2">
                                                    <thead>
                                                        <tr>
                                                            <td><input type="checkbox" onclick="CheckAllTableRows(event)" /></td>
                                                            <th>Municipality</th>
                                                            <th>Contractor</th>
                                                            <th>Account Number</th>
                                                            <th>Account Holder</th>
                                                            <th>Action Type</th>
                                                            <th>Issue Date</th>
                                                            <th>JobCard Code</th>
                                                            <th>Status</th>
                                                            <th>Status Description</th>
                                                            <th>Technician</th>
                                                        </tr>
                                                    </thead>
                                                    <tbody>
                                                        @foreach (AllocatedAccount account in data.AllocatedAccounts)
                                                        {
                                                            <tr>
                                                                <td><input type="checkbox" name="selectedAccounts" value="@account.Id" /></td>
                                                                <td>@Html.Raw(account.R_CC_CUT_OFF_PROCESSING.Municipality)</td>
                                                                <td>@Html.Raw(account.R_CC_CUT_OFF_PROCESSING.ACCOUNT_NO)</td>
                                                                <td>@Html.Raw(account.Contractor.Name)</td>
                                                                <td>@Html.Raw(String.Format("{0} {1}", account.R_CC_CUT_OFF_PROCESSING.INITIALS, account.R_CC_CUT_OFF_PROCESSING.SURNAME))</td>
                                                                <td>@Html.Raw(account.ActionType.Name)</td>
                                                                <td>@Html.Raw(account.CreatedDateTime)</td>
                                                                <td>@Html.Raw("N/A")</td>
                                                                <td>@Html.Raw("")</td>
                                                                <td>@Html.Raw("")</td>
                                                                <td>@Html.Raw("")</td>
                                                            </tr>
                                                        }
                                                    </tbody>
                                                </table>
                                            </div>



                                            <table id="example" class="table table-striped" style="width:200%" hidden>
                                                <thead>
                                                    <tr>
                                                        <td><input type="checkbox" onclick="CheckAllTableRows(event)" /></td>
                                                        <th>Municipality</th>
                                                        <th>Contractor</th>
                                                        <th>Account Number</th>
                                                        <th>Account Holder</th>
                                                        <th>Action Type</th>
                                                        <th>Issue Date</th>
                                                        <th>JobCard Code</th>
                                                        <th>Status</th>
                                                        <th>Status Description</th>
                                                        <th>Technician</th>
                                                    </tr>
                                                </thead>
                                                <tbody>
                                                    @foreach (AllocatedAccount account in data.AllocatedAccounts)
                                                    {
                                                        <tr>
                                                            <td><input type="checkbox" name="selectedAccounts" value="@account.Id" /></td>
                                                            <td>@Html.Raw(account.R_CC_CUT_OFF_PROCESSING.Municipality)</td>
                                                            <td>@Html.Raw(account.R_CC_CUT_OFF_PROCESSING.ACCOUNT_NO)</td>
                                                            <td>@Html.Raw(account.Contractor.Name)</td>
                                                            <td>@Html.Raw(String.Format("{0} {1}", account.R_CC_CUT_OFF_PROCESSING.INITIALS, account.R_CC_CUT_OFF_PROCESSING.SURNAME))</td>
                                                            <td>@Html.Raw(account.ActionType.Name)</td>
                                                            <td>@Html.Raw(account.CreatedDateTime)</td>
                                                            <td>@Html.Raw("N/A")</td>
                                                            <td>@Html.Raw("")</td>
                                                            <td>@Html.Raw("")</td>
                                                            <td>@Html.Raw("")</td>
                                                        </tr>
                                                    }
                                                </tbody>
                                            </table>
                                        </div>
                                    </div>
                                </div><!-- end col -->
                            </div><!-- end row -->
                        </div>
                    </div>
                </div>
            </div>
        </div>





        <!--  Extra Large modal example -->
        <!--<div class="modal fade @data.GroupId" tabindex="-1" role="dialog"
             aria-labelledby="myExtraLargeModalLabel" aria-hidden="true" hidden>
            <div class="modal-dialog modal-xl">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title" id="myExtraLargeModalLabel">
                            Contractor Assign To Technician : @data.Contractor.Name
                        </h5>
                        <button type="button" class="btn-close" data-bs-dismiss="modal"
                                aria-label="Close"></button>
                    </div>
                    <div class="modal-body">
                        <div class="row">
                            <div class="col-lg-12">
                                <div class="card">
                                    <div class="card-header">
                                        <h6 class="card-title">Jobcard Balance Sheet By Contractor Detail</h6>
                                    </div>-->
        <!-- end card header -->
        <!--<div class="card-body">
            <div class="row">
                <div class="col-lg-6">
                    <div class="mb-3">
                        <label for="basicpill-firstname-input" class="form-label fs-6"> Allocation Group </label>
                        <div class="col-md-9 input-group">
                            <span class="input-group-text"><span class="fa fa-list "></span></span>
                            @Html.DropDownList("TechnicianId", DropdownHelper.GETTECHNICIANS(data.Contractor.Id), "-- Select Technician --", htmlAttributes: new { @class = "form-control form-control-sm", @Name = "TechnicianId", @required = true })
                            <span class="input-group-text"><span class="fa "></span></span>
                        </div>
                    </div>
                </div>

                <div class="col-lg-6">
                    <div class="mb-3">
                        <span> <label for="basicpill-lastname-input" class="form-label"></label></span>
                        <div class="col-md-9 input-group">
                            <button type="submit" class="btn btn-sm btn-primary w-sm">
                                <span class="fa fa-paper-plane"></span>
                                Assign
                            </button>
                            <button type="submit" class="btn btn-sm btn-secondary w-sm" data-bs-dismiss="modal">
                                <span class="fa fa-times"></span>
                                Cancel
                            </button>
                        </div>
                    </div>
                </div>-->
        <!-- end col -->
        <!-- end col -->

        <!--</div>
        <br />
        <div class="card-header">
            <h6 class="card-title">Jobcard Balance Sheet Contractor/Technician</h6>
        </div>-->
        <!-- end card header -->
        <!--<br />
                    <table id="example" class="table table-striped" style="width:200%">
                        <thead>
                            <tr>
                                <td><input type="checkbox" onclick="CheckAllTableRows(event)" /></td>
                                <th>Municipality</th>
                                <th>Contractor</th>
                                <th>Account Number</th>
                                <th>Account Holder</th>
                                <th>Action Type</th>
                                <th>Issue Date</th>
                                <th>JobCard Code</th>
                                <th>Status</th>
                                <th>Status Description</th>
                                <th>Technician</th>
                            </tr>
                        </thead>
                        <tbody>
                            @foreach (AllocatedAccount account in data.AllocatedAccounts)
                            {
                                <tr>
                                    <td><input type="checkbox" name="selectedAccounts" value="@account.Id" /></td>
                                    <td>@Html.Raw(account.R_CC_CUT_OFF_PROCESSING.Municipality)</td>
                                    <td>@Html.Raw(account.R_CC_CUT_OFF_PROCESSING.ACCOUNT_NO)</td>
                                    <td>@Html.Raw(account.Contractor.Name)</td>
                                    <td>@Html.Raw(String.Format("{0} {1}", account.R_CC_CUT_OFF_PROCESSING.INITIALS, account.R_CC_CUT_OFF_PROCESSING.SURNAME))</td>
                                    <td>@Html.Raw(account.ActionType.Name)</td>
                                    <td>@Html.Raw(account.CreatedDateTime)</td>
                                    <td>@Html.Raw("N/A")</td>
                                    <td>@Html.Raw("")</td>
                                    <td>@Html.Raw("")</td>
                                    <td>@Html.Raw("")</td>
                                </tr>
                            }
                        </tbody>
                    </table>
                </div>
            </div>
        </div>-->
        <!-- end col -->
        <!--</div>--><!-- end row -->
        <!--</div>
        </div>-->
        <!-- /.modal-content -->
        <!--</div>--><!-- /.modal-dialog -->
        <!--</div>--><!-- /.modal -->
    }
}

<div class="modal fade bd-example-modal-lg" tabindex="-1" role="dialog" aria-labelledby="myLargeModalLabel"
     aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="myLargeModalLabel">Modal title</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                Content goes here....
            </div>
        </div>
    </div>
</div>

<!--foreach (ContractorJobSheetViewModel data in Model)
{
    using (Html.BeginForm("TechnicianBulkAssign", "Contractor", FormMethod.Post/*, new { id = "ContractorFormId" }*/))
    {-->
<!--  Extra Large modal example -->
<!--<div class="modal fade data.GroupId" tabindex="-1" role="dialog"
     aria-labelledby="myExtraLargeModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-xl">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="myExtraLargeModalLabel">
                    Contractor Assign To Technician : data.Contractor.Name
                </h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal"
                        aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <div class="row">
                    <div class="col-lg-12">
                        <div class="card">
                            <div class="card-header">
                                <h6 class="card-title">Jobcard Balance Sheet By Contractor Detail</h6>
                            </div>-->
<!-- end card header -->
<!--<div class="card-body">
    <div class="row">
        <div class="col-lg-6">
            <div class="mb-3">
                <label for="basicpill-firstname-input" class="form-label fs-6"> Allocation Group </label>
                <div class="col-md-9 input-group">
                    <span class="input-group-text"><span class="fa fa-list "></span></span>
                    Html.DropDownList("TechnicianId", DropdownHelper.GETTECHNICIANS(data.Contractor.Id), "-- Select Technician --", htmlAttributes: new { class = "form-control form-control-sm", Name = "TechnicianId", required = true })
                    <span class="input-group-text"><span class="fa "></span></span>
                </div>
            </div>
        </div>

        <div class="col-lg-6">
            <div class="mb-3">
                <span> <label for="basicpill-lastname-input" class="form-label"></label></span>
                <div class="col-md-9 input-group">
                    <button type="submit" class="btn btn-sm btn-primary w-sm">
                        <span class="fa fa-paper-plane"></span>
                        Assign
                    </button>
                    <button type="submit" class="btn btn-sm btn-secondary w-sm" data-bs-dismiss="modal">
                        <span class="fa fa-times"></span>
                        Cancel
                    </button>
                </div>
            </div>
        </div>-->
<!-- end col -->
<!-- end col -->
<!--</div>
<br />
<div class="card-header">
    <h6 class="card-title">Jobcard Balance Sheet Contractor/Technician</h6>
</div>-->
<!-- end card header -->
<!--<br />
            <table id="example" class="table table-striped" style="width:200%">
                <thead>
                    <tr>
                        <td><input type="checkbox" onclick="CheckAllTableRows(event)" /></td>
                        <th>Municipality</th>
                        <th>Contractor</th>
                        <th>Account Number</th>
                        <th>Account Holder</th>
                        <th>Action Type</th>
                        <th>Issue Date</th>
                        <th>JobCard Code</th>
                        <th>Status</th>
                        <th>Status Description</th>
                        <th>Technician</th>
                    </tr>
                </thead>
                <tbody>
                    foreach (AllocatedAccount account in data.AllocatedAccounts)
                    {
                        <tr>
                            <td><input type="checkbox" name="selectedAccounts" value="account.Id" /></td>
                            <td>Html.Raw(account.R_CC_CUT_OFF_PROCESSING.Municipality)</td>
                            <td>Html.Raw(account.R_CC_CUT_OFF_PROCESSING.ACCOUNT_NO)</td>
                            <td>Html.Raw(account.Contractor.Name)</td>
                            <td> Html.Raw(String.Format("{0} {1}", account.R_CC_CUT_OFF_PROCESSING.INITIALS, account.R_CC_CUT_OFF_PROCESSING.SURNAME))</td>
                            <td>Html.Raw(account.ActionType.Name)</td>
                            <td>Html.Raw(account.CreatedDateTime)</td>
                            <td>Html.Raw("N/A")</td>
                            <td>Html.Raw("")</td>
                            <td>Html.Raw("")</td>
                            <td>Html.Raw("")</td>
                        </tr>
                    }
                </tbody>
            </table>
        </div>
    </div>
</div>-->
<!-- end col -->
<!--</div>--><!-- end row -->
<!--</div>
</div>-->
<!-- /.modal-content -->
<!--</div>--><!-- /.modal-dialog -->
<!--</div>--><!-- /.modal -->
<!--}
}-->
<script src="~/Scripts/jquery-3.4.1.js"></script>
<script src="~/Scripts/jquery-3.4.1.min.js"></script>
@*<script src="~/assets/js/page/form-wizard.js"></script>*@
<script src="~/assets/bundles/jquery-steps/jquery.steps.min.js"></script>
<script src="~/assets/bundles/jquery-validation/dist/jquery.validate.min.js"></script>

<script src="~/assets/bundles/datatables/datatables.min.js"></script>
<script src="~/assets/bundles/datatables/DataTables-1.10.16/js/dataTables.bootstrap4.min.js"></script>
<script src="~/assets/bundles/jquery-ui/jquery-ui.min.js"></script>
<!-- Page Specific JS File -->
<script src="~/assets/js/page/datatables.js"></script>
<script>
    function CheckAllTableRows(event) {
        // Get the status of the header checkbox
        const isChecked = event.target.checked;
        // Find all checkboxes in the current table and set their checked status
        $('input[name="selectedAccounts"]').prop('checked', isChecked);
    }
</script>